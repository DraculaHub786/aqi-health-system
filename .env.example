# Environment Variables Template
# Copy this file to .env and fill in your API keys

# WAQI API Key (Get from https://aqicn.org/data-platform/token/)
WAQI_API_KEY=c294968cd8d66811cae8a5cddb3928cf4b7ff695

# OpenWeather API Key (Get from https://openweathermap.org/api)
OPENWEATHER_API_KEY=demo

# Application Settings
ENV=production
DEBUG=false
CACHE_TTL=300
LOG_LEVEL=INFO

# Database
DB_PATH=data/aqi_history.db

!pip install pyngrok -q

NGROK_AUTH_TOKEN = "38KfzQ3XyATzqdqwk3ZylBCPMDM_5fkMNZsQTeNEHUmLDz3Pt"

from pyngrok import ngrok
import subprocess, time

# Apply token
ngrok.set_auth_token(NGROK_AUTH_TOKEN)

print("üöÄ Starting Streamlit app...")
proc = subprocess.Popen(
    [
        "streamlit", "run", "streamlit_app.py",
        "--server.headless=true",
        "--server.address=0.0.0.0",
        "--server.port=8501",
        "--logger.level=error",
    ],
    stdout=subprocess.DEVNULL,
    stderr=subprocess.DEVNULL,
)

time.sleep(6)

public_url = ngrok.connect(8501, "http")
print("\n" + "="*60)
print("üéâ YOUR APP IS LIVE!")
print("="*60)
print(f"üì± Public URL: {public_url}")
print("="*60)
print("‚ú® Click the link above or copy it to your browser!")
print("‚è±Ô∏è App stays live while Colab is running")
print("="*60 + "\n")